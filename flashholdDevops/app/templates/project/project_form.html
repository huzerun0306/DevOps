{% extends "app/base_site.html" %}

{% block title %} 项目 {% endblock title %}

{% block content %}
  <div class="right_col" role="main">
    <div class="">
      <div class="page-title">
        <div class="title_left">
          <h3>项目</h3>
        </div>

      </div>
      <div class="clearfix"></div>
      {% if error %}
           <div class="alert alert-danger alert-dismissible fade in" role="alert">
              <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span>
              </button>
              {{ error }}
            </div>
          {% endif %}
      <div class="row">
        <div class="col-md-12 col-sm-12 col-xs-12">
          <div class="x_panel">

            <div class="x_content">

              <form action="" method="post" class="form-horizontal form-label-left" novalidate>{% csrf_token %}
                  {% if form.name or create %}
                    <span class="section">创建项目</span>
                {% else %}
                    <span class="section">更新项目</span>
                {% endif %}
                <div class="item form-group">
                  <label class="control-label col-md-3 col-sm-3 col-xs-12" for="{{ form.name.id_for_label }}">{{ form.name.label_tag }}<span class="required">*</span>
                  </label>
                  <div class="col-md-6 col-sm-6 col-xs-12">
                      {{ form.name }}{{ form.name.errors }}
                  </div>
                </div>
                <div class="item form-group">
                  <label class="control-label col-md-3 col-sm-3 col-xs-12" for="{{ form.slugName.id_for_label }}">{{ form.slugName.label_tag }}<span class="required">*</span>
                  </label>
                  <div class="col-md-6 col-sm-6 col-xs-12">
                      {{ form.slugName }}{{ form.slugName.errors }}
                  </div>
                </div>
{#                <div class="item form-group">#}
{#                  <label class="control-label col-md-3 col-sm-3 col-xs-12" for="{{ form.admin.id_for_label }}">{{ form.admin.label_tag }}<span class="required">*</span>#}
{#                  </label>#}
{#                  <div class="col-md-6 col-sm-6 col-xs-12">#}
{#                      {{ form.admin }}{{ form.admin.errors }}#}
{#                  </div>#}
{#                </div>#}
{#                <div class="item form-group">#}
{#                  <label class="control-label col-md-3 col-sm-3 col-xs-12" for="{{ form.members.id_for_label }}">{{ form.members.label_tag }}<span class="required">*</span>#}
{#                  </label>#}
{#                  <div class="col-md-6 col-sm-6 col-xs-12">#}
{#                      {{ form.members }}{{ form.members.errors }}#}
{#                  </div>#}
{#                </div>#}
{#              　<div class="item form-group">#}
{#                  <label class="control-label col-md-3 col-sm-3 col-xs-12" for="{{ form.extendApp.id_for_label }}">基线应用#}
{#                  </label>#}
{#                  <div class="col-md-6 col-sm-6 col-xs-12">#}
{#                      <input type="hidden" name="jstree_data" value="" />#}
{#                      <div id="baseapp_tree"></div>#}
{#                  </div>#}
{#                </div>#}
              　
                <div class="item form-group">
                  <label class="control-label col-md-3 col-sm-3 col-xs-12" for="{{ form.desc.id_for_label }}">{{ form.desc.label_tag }}<span class="required">*</span>
                  </label>
                  <div class="col-md-6 col-sm-6 col-xs-12">
                      {{ form.desc }}{{ form.desc.errors }}
                  </div>
                </div>
                <div class="ln_solid"></div>
                <div class="form-group">
                  <div class="col-md-6 col-md-offset-3">
                    <a href="{% url 'project_list' %}" class="btn btn-primary">取消</a>
                    <button id="send" type="submit" class="btn btn-success" data-loading-text="Loading..." autocomplete="off">提交</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock content %}

{% block javascripts %}
  {{ block.super }}
<script type="text/javascript">
    {#var pro_branch =　'';#}
    $(function () {
        {#$('#send').on('click', function () {#}
        {#    var $btn = $(this).button('loading');#}
        {#    $("input[name='jstree_data']").val(localStorage.getItem("baseapp_key"));#}
        {#    localStorage.removeItem("baseapp_key")#}
        {#    // business logic...#}
            {#$btn.button('reset')#}
        {#  })#}
        {##}
        {# $.ajax({#}
        {#    async:false,#}
        {#    cache:true,#}
        {#    url: "{% url 'get_baseapp_tree' %}",#}
        {#    data: {},#}
        {#    type: "post",#}
        {#    dataType:'json',#}
        {#    success:function(result){#}
        {#        $('#baseapp_tree').jstree({ 'core' : {#}
        {#                'data' : eval(result.data),#}
        {#            },#}
        {#            "state" : { "key" : "baseapp_key" },#}
        {#            "plugins" : ["checkbox","state"]}#}
        {#            );#}
        {#        },#}
        {#    });#}
        {#$("input[name='baseApp']").on('click',function () {#}
        {#                if　($(this).prop('checked') && ! document.getElementById($(this).val())){#}
        {#                     $(this).parent().after("<span id='"+$(this).val()+"'></span>");#}
        {#                    $('body').one('click','#'+$(this).val(),{"id":$(this).val()},tree_load);#}
        {#                    $("#"+$(this).val()).trigger("click");#}
        {#                }else if (!$(this).prop('checked') && document.getElementById($(this).val())){#}
        {#                    $("#"+$(this).val()).remove();#}
        {#                }#}
        {##}
        {#          });#}

        {#$("select[name='baseAppVersion']").on('click',function () {#}
        {#                pro_branch = $(this).val();#}
        {#          });#}
        {#$("#send").click(function () {})#}


    });
</script>
  <!-- validator -->
{#  <script src="/static/vendors/validator/validator.js"></script>#}
{% endblock javascripts %}
